//@version=5
indicator("Daily Vertical Lines", overlay=true, max_lines_count=200)

// Времена как 1400, 1530, ...
times = array.from(1400, 1530, 1730, 2000, 2200)

getH(v) => math.floor(v / 100)
getM(v) => v % 100

tz = "Asia/Bangkok"

// Дата сегодня в TZ
todayYear  = year(time, tz)
todayMonth = month(time, tz)
todayDay   = dayofmonth(time, tz)

// Рисуем линии для всех целевых времен сегодняшнего дня
for i = 0 to array.size(times) - 1
    v = array.get(times, i)
    h = getH(v)
    m = getM(v)
    tstamp = timestamp(tz, todayYear, todayMonth, todayDay, h, m)
    // Если время >= начала сегодняшней торговой сессии и <= конца дня
    if time >= timestamp(tz, todayYear, todayMonth, todayDay, 0, 0)
        line.new(tstamp, high, tstamp, low, xloc=xloc.bar_time, extend=extend.both, color=color.gray, style=line.style_dotted, width=1)
